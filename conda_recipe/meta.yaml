{% set name = "meteor" %}
#{% set version = "2.0.0" %}

package:
    name: {{ name }}
    version: "{{ environ['GIT_DESCRIBE_TAG'] }}"

channels:
    - conda-forge
    - bioconda
    - defaults

source:
      path: ..

build:
  noarch: python
  script: {{ PYTHON }} -m pip install . --no-deps -vv

requirements:
    host:
        - python=3.10.13
        - poetry
    run:
        - python=3.10.13
        - bowtie2>=2.3.5
        - pysam
        - pyarrow
        - pandas
        - ete3
        #- pyqt5-sip
        - packaging
        - bcftools>=0.1.19
        - fasttree>=1.9.0
test:
    commands:
        - meteor test
    imports:
        - pysam
        - pandas
        - pyarrow
        - ete3
        - packaging

about:
  home: https://github.com/metagenopolis/meteor
  license: GPL (>= 3)
  license_file: COPYING
  summary: 'Meteor is a plateform for quantitative metagenomics profiling of complex ecosystems.'
  description: |
    Meteor relies on genes catalogue to perform specie level taxonomic assignments and functional analysis.
  license_family: GPL3
