package:
    name: meteor
    version: {{ environ.get('GIT_DESCRIBE_TAG', '') }}

source:
    - git_url: https://forgemia.inra.fr/metagenopolis/meteor.git
      git_tag: origin/dev

build:
  noarch: python
  script: {{ PYTHON }} -m pip install .
  # always_include_files:
  #   - meteor-counter
  #   - meteor-profiler
  ignore_run_exports_from:
    - {{ compiler('cxx') }}

requirements:
    build:
        - {{ compiler('cxx') }}
    #     - make
    host:
        - python>=3.11
    run:
        - python>=3.11
        - bowtie2
        - pysam
        - pandas
test:
    commands:
        - meteor -h
        # - meteor-counter -h
        # - meteor-profiler -h
    imports:
        - pysam
        - pandas

about:
  home: https://mgps.eu/
  license: GPL (>= 3)
  summary: 'Meteor is a plateform for quantitative metagenomics profiling of complex ecosystems.'
  description: |
    Meteor relies on genes catalogue to perform specie level taxonomic assignments and functional analysis.
  dev_url: https://forgemia.inra.fr/metagenopolis/meteor
  license_family: GPL3
